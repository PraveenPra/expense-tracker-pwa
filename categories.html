<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic Categories</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        width: 100%;
        max-width: 400px;
        background: white;
        padding: 20px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
      }

      h2 {
        text-align: center;
        margin-bottom: 10px;
      }

      .category-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .category {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #f9f9f9;
        padding: 10px;
        border-radius: 5px;
        transition: background 0.2s;
      }

      .category:hover {
        background: #e0e0e0;
      }

      .category label {
        display: flex;
        align-items: center;
        cursor: pointer;
      }

      .category input[type="radio"] {
        margin-right: 10px;
      }

      .remove-btn {
        background: none;
        border: none;
        color: red;
        font-size: 18px;
        cursor: pointer;
        transition: color 0.2s;
      }

      .remove-btn:hover {
        color: darkred;
      }

      .input-group {
        display: flex;
        gap: 5px;
        margin-top: 15px;
      }

      .input-group input {
        flex: 1;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
        outline: none;
      }

      .input-group button {
        padding: 8px 15px;
        background: blue;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .input-group button:hover {
        background: darkblue;
      }

      .reset-btn {
        width: 100%;
        margin-top: 15px;
        padding: 10px;
        background: red;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .reset-btn:hover {
        background: darkred;
      }

      .edit-input {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        outline: none;
        width: 100px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Manage Categories</h2>

      <div class="category-container" id="categoryContainer"></div>

      <div class="input-group">
        <input
          type="text"
          id="newCategory"
          placeholder="Enter category name"
          onkeydown="handleKeyPress(event)"
        />
        <button onclick="addCategory()">Add</button>
      </div>

      <button class="reset-btn" onclick="resetCategories()">
        Reset to Default
      </button>
    </div>

    <script>
      const defaultCategories = [
        { value: "Rent", label: "Rent" },
        { value: "Travel", label: "Travel" },
        { value: "Puja items", label: "Puja Items" },
        { value: "Food", label: "Food" },
        { value: "Clothes", label: "Dress" },
        { value: "Health", label: "Health" },
        { value: "Send others", label: "To Others" },
        { value: "Mom", label: "Mom" },
        { value: "Shopping - out", label: "Shopping" },
        { value: "Shop", label: "Shop" },
        { value: "Dining out", label: "Dine Out" },
        { value: "Others", label: "Misc" },
      ];

      function loadCategories() {
        const storedCategories = localStorage.getItem("categories");
        return storedCategories
          ? JSON.parse(storedCategories)
          : defaultCategories;
      }

      function saveCategories() {
        localStorage.setItem("categories", JSON.stringify(categories));
      }

      function renderCategories() {
        const container = document.getElementById("categoryContainer");
        container.innerHTML = "";

        categories.forEach((category, index) => {
          const div = document.createElement("div");
          div.classList.add("category");

          div.innerHTML = `
                    <label>
                        <input type="radio" name="category" value="${category.value}">
                        <span ondblclick="editCategory(${index})" id="cat-${index}">${category.label}</span>
                    </label>
                    <button class="remove-btn" onclick="removeCategory(${index})">âœ–</button>
                `;

          container.appendChild(div);
        });
      }

      function addCategory() {
        const input = document.getElementById("newCategory");
        const value = input.value.trim();

        if (value) {
          categories.push({ value: value, label: value });
          saveCategories();
          input.value = "";
          renderCategories();
        }
      }

      function handleKeyPress(event) {
        if (event.key === "Enter") {
          addCategory();
        }
      }

      function removeCategory(index) {
        categories.splice(index, 1);
        saveCategories();
        renderCategories();
      }

      function resetCategories() {
        categories = [...defaultCategories];
        saveCategories();
        renderCategories();
      }

      function editCategory(index) {
        const span = document.getElementById(`cat-${index}`);
        const currentLabel = categories[index].label;

        const input = document.createElement("input");
        input.type = "text";
        input.value = currentLabel;
        input.classList.add("edit-input");

        span.replaceWith(input);
        input.focus();

        input.addEventListener("blur", () => saveEdit(index, input.value));
        input.addEventListener("keydown", (event) => {
          if (event.key === "Enter") saveEdit(index, input.value);
          if (event.key === "Escape") cancelEdit(index, currentLabel);
        });
      }

      function saveEdit(index, newValue) {
        if (newValue.trim() !== "") {
          categories[index].label = newValue;
          categories[index].value = newValue;
          saveCategories();
        }
        renderCategories();
      }

      function cancelEdit(index, originalValue) {
        categories[index].label = originalValue;
        renderCategories();
      }

      let categories = loadCategories();
      renderCategories();
    </script>
  </body>
</html>
